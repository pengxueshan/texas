(this.webpackJsonptexas=this.webpackJsonptexas||[]).push([[0],{294:function(e,t,a){e.exports=a(599)},299:function(e,t,a){},300:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},307:function(e,t){},309:function(e,t){},341:function(e,t){},342:function(e,t){},483:function(e,t,a){},584:function(e,t,a){},595:function(e,t,a){},596:function(e,t,a){},597:function(e,t,a){},599:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),c=a.n(s),o=(a(299),a(40)),l=a(52),i=a(98),u=a(69),m=(a(300),a(301),r.a.createContext({users:[],rounds:[],roundUserInfo:[],showSession:!1,setUsers:function(){},setRounds:function(){},setRoundUserInfo:function(){},setShowSession:function(){},isAuthenticated:!1,setIsAuthenticated:function(){}})),d=a(7),f=a.n(d),v=a(260),h=a.n(v),g=a(153),p=a.n(g),E=(a(302),a(15)),b=a(606),y=a(604),j=a(605),O=a(26),S=(a(303),a(136));function k(e){var t=e.visible,a=Object(n.useState)(!1),s=Object(E.a)(a,2),c=s[0],o=s[1],l=Object(n.useState)(""),i=Object(E.a)(l,2),u=i[0],d=i[1],v=Object(n.useState)(""),h=Object(E.a)(v,2),g=h[0],p=h[1],k=Object(n.useState)(0),w=Object(E.a)(k,2),I=w[0],x=w[1],N=Object(n.useState)(""),C=Object(E.a)(N,2),U=C[0],R=C[1],M=Object(n.useContext)(m);function A(){I<=0||(x(I-1),setTimeout(A,1e3))}return r.a.createElement(y.a,{title:"\u767b\u5f55\u6216\u6ce8\u518c",visible:t,onOk:function(){return u?g?U?"41b9df4a217bb3c10b1c339358111b0d"!==Object(S.MD5)(U).toString()?b.a.error("\u9080\u8bf7\u7801\u9519\u8bef"):(o(!0),void f.a.User.signUpOrlogInWithMobilePhone("+86".concat(u),g).then((function(e){o(!1),M.setShowSession(!1)}),(function(e){o(!1),b.a.error(e.message)}))):b.a.error("\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"):b.a.error("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"):b.a.error("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")},onCancel:function(){M.setShowSession(!1)},confirmLoading:c},r.a.createElement("div",{className:"session"},r.a.createElement("div",{className:"form-row"},r.a.createElement(j.a,{placeholder:"\u624b\u673a\u53f7\u7801",value:u,onChange:function(e){d(e.target.value)}})),r.a.createElement("div",{className:"form-row"},r.a.createElement(j.a,{placeholder:"\u9a8c\u8bc1\u7801",value:g,onChange:function(e){p(e.target.value)}}),r.a.createElement(O.a,{disabled:I>0,onClick:function(){I>0||!u||f.a.Cloud.requestSmsCode("+86".concat(u)).then((function(){x(60),function(){if(I>0)return;A()}()}))}},I<=0?"\u83b7\u53d6\u9a8c\u8bc1\u7801":"".concat(I,"s"))),r.a.createElement("div",{className:"form-row"},r.a.createElement(j.a,{placeholder:"\u9080\u8bf7\u7801",value:U,onChange:function(e){R(e.target.value)}}))))}var w=a(600),I=a(59),x=a(608);function N(){var e=Object(n.useContext)(m);var t,a=f.a.User.current();return a&&(t=a.get("avatar")),r.a.createElement("div",{className:"top-bar"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(I.b,{to:"/"},"\u6392\u884c\u699c")),r.a.createElement("li",null,r.a.createElement(I.b,{to:"/photo"},"\u7cbe\u5f69\u77ac\u95f4")),r.a.createElement("li",null,r.a.createElement(I.b,{to:"/message"},"\u804a\u5929\u5ba4")))),r.a.createElement("div",{className:"user-section"},a?[t?r.a.createElement(w.a,{size:32,src:t.get("url")}):r.a.createElement(w.a,{size:32,icon:r.a.createElement(x.a,null)}),r.a.createElement(I.b,{key:"setting",to:"/profile"},"\u8bbe\u7f6e"),r.a.createElement("span",{key:"logout",className:"link-style",onClick:function(){y.a.confirm({title:"\u786e\u5b9a\u9000\u51fa\u767b\u5f55\u5417\uff1f",onOk:function(){return f.a.User.logOut().then((function(){window.location.reload()}))}})}},"\u9000\u51fa\u767b\u5f55")]:r.a.createElement("span",{className:"link-style",onClick:function(){e.setShowSession(!0)}},"\u767b\u5f55"),r.a.createElement(k,{visible:e.showSession})))}var C=a(19),U=a(601);a(483);function R(e){var t=e.list,a=Object(n.useContext)(m),s=[{title:"\u6392\u540d",key:"rank",render:function(e,t,a){return a+1}},{title:"\u9009\u624b",key:"username",render:function(e,t){var n,s=(n=t.player.get("objectId"),a.users.find((function(e){return e.get("objectId")===n}))),c=null===s||void 0===s?void 0:s.get("avatar"),o=null===s||void 0===s?void 0:s.get("name");return r.a.createElement("div",{className:"player-wrap"},r.a.createElement("div",{className:"avatar-wrap"},c?r.a.createElement(w.a,{size:24,src:c.get("url")}):r.a.createElement(w.a,{size:24,icon:r.a.createElement(x.a,null)})),o)}},{title:"\u53c2\u8d5b\u6b21\u6570",key:"count",dataIndex:"count"},{title:"\u5355\u6b21\u6700\u5927\u76c8\u5229",key:"max",dataIndex:"max",sorter:function(e,t){return e.max-t.max}},{title:"\u5355\u6b21\u6700\u5927\u4e8f\u635f",key:"min",dataIndex:"min",sorter:function(e,t){return e.min-t.min}},{title:"\u7d2f\u8ba1\u7b79\u7801\u76c8\u4e8f",key:"total",dataIndex:"total",sorter:function(e,t){return e.total-t.total}},{title:"\u7d2f\u8ba1\u76c8\u4e8f\u91d1\u989d",key:"totalBalance",dataIndex:"totalBalance",sorter:function(e,t){return e.totalBalance-t.totalBalance}},{title:"\u5f53\u524d\u8d54\u7387",key:"currentLeverage",dataIndex:"currentLeverage"},{title:"\u64cd\u4f5c",key:"opt",dataIndex:"opt"}];return r.a.createElement("div",{className:"rank-wrap"},r.a.createElement(U.a,{dataSource:t,columns:s,pagination:!1}))}var M=a(281),A=a(602),P=a(607),D=a(47),T=a.n(D);function L(e){var t=e.isModify,a=void 0!==t&&t,s=e.roundIndex,c=void 0===s?0:s,o=e.visible,l=e.onOk,i=e.onCancel,u=Object(n.useContext)(m),d=u.rounds,v=u.roundUserInfo,h=Object(n.useState)([{roundNO:d.length+1}]),g=Object(E.a)(h,2),p=g[0],j=g[1],O=Object(n.useState)(""),S=Object(E.a)(O,2),k=S[0],w=S[1],I=Object(n.useState)(.1),x=Object(E.a)(I,2),N=x[0],C=x[1],R=Object(n.useState)({}),D=Object(E.a)(R,2),L=D[0],Y=D[1];function z(e){w(e?e.format("YYYY/MM/DD"):"")}function B(e){C(e||.1)}return Object(n.useEffect)((function(){if(a){var e=v[c],t=d[c],n={};e&&e.forEach((function(e){n[e.get("player").get("objectId")]=e.get("amount")})),j([{roundNO:c+1}]),C(t.get("leverage")),w(t.get("dateTime")),Y(n)}}),[a,v,c,d]),r.a.createElement(y.a,{visible:o,onCancel:function(){i()},onOk:function(){if(a){var e=u.rounds[c],t=u.roundUserInfo[c],n=f.a.Object.createWithoutData("Round",e.get("objectId"));n.set("dateTime",k),n.set("leverage",N);var r=[];return Object.keys(L).forEach((function(e){var a,s=t.find((function(t){return t.get("player").get("objectId")===e}));if(s)a=s;else{var c=u.users.find((function(t){return t.get("objectId")===e}));(a=new(f.a.Object.extend("RoundUserInfo"))).set("round",n),a.set("player",c)}a.set("amount",L[e]),r.push(a)})),Promise.all([n.save(),f.a.Object.saveAll(r)]).then((function(){l&&l()})).catch((function(e){b.a.error(e.message)}))}var s=new(f.a.Object.extend("Round"));s.set("dateTime",k),s.set("leverage",N);var o=f.a.Object.extend("RoundUserInfo"),i=[];return Object.keys(L).forEach((function(e){var t=new o,a=u.users.find((function(t){return t.get("objectId")===e}));t.set("round",s),t.set("player",a),t.set("amount",L[e]),i.push(t)})),f.a.Object.saveAll(i).then((function(){l&&l()})).catch((function(e){b.a.error(e.message)}))},width:1200},r.a.createElement("div",{className:"add-round-wrap"},r.a.createElement(U.a,{dataSource:p,columns:[{title:"\u573a\u6b21",key:"roundNO",dataIndex:"roundNO",ellipsis:!0},{title:"\u65e5\u671f",key:"dateTime",ellipsis:!0,render:function(){return r.a.createElement("div",{style:{width:"150px"}},r.a.createElement(A.a,{onChange:z,format:"YYYY/MM/DD",value:T()(k,"YYYY/MM/DD")}))}},{title:"\u6760\u6746\u6bd4\u4f8b",key:"leverage",ellipsis:!0,render:function(){return r.a.createElement(P.a,{onChange:B,value:N})}}].concat(u.users.map((function(e){return{title:e.get("name"),key:e.get("objectId"),ellipsis:!0,render:function(){return r.a.createElement(P.a,{onChange:function(t){return function(e,t){e=e?+e:0;var a=Object(M.a)({},L);a[t.get("objectId")]=e,Y(a)}(t,e)},value:L[e.get("objectId")]})}}}))),pagination:!1,scroll:{x:!0}})))}function Y(e){var t=e.visible,a=e.onModify,s=e.onOk,c=e.onCancel,o=Object(n.useContext)(m);var l=o.rounds;return r.a.createElement(y.a,{visible:t,onCancel:c,onOk:s,width:1200},r.a.createElement("div",{className:"details-round-wrap"},r.a.createElement(U.a,{dataSource:l,columns:function(){var e=[{title:"\u573a\u6b21",key:"roundNO",ellipsis:!0,render:function(e,t,a){return a+1}},{title:"\u65e5\u671f",key:"dateTime",ellipsis:!0,render:function(e,t){return t.get("dateTime")}},{title:"\u6760\u6746\u6bd4\u4f8b",key:"leverage",ellipsis:!0,render:function(e,t){return t.get("leverage")}}],t=o.users;return e=e.concat(t.map((function(e){return{title:e.get("name"),key:e.get("objectId"),ellipsis:!0,render:function(t,a,n){return function(e,t){var a=o.roundUserInfo[t];if(a){var n=a.find((function(t){return t.get("player").get("objectId")===e}));return n&&n.get("amount")||""}return""}(e.get("objectId"),n)}}}))),f.a.User.current()&&(e=e.concat({title:"\u64cd\u4f5c",key:"opt",render:function(e,t,n){return r.a.createElement("div",{className:"details-opt"},r.a.createElement("span",{onClick:function(){return function(e){a(e)}(n)}},"\u4fee\u6539"))}})),e}(),pagination:!1,scroll:{x:!0}})))}function z(e){var t=e.onAddDone,a=e.list,s=Object(n.useState)(!1),c=Object(E.a)(s,2),o=c[0],l=c[1],i=Object(n.useState)(!1),u=Object(E.a)(i,2),m=u[0],d=u[1],v=Object(n.useState)(!1),h=Object(E.a)(v,2),g=h[0],p=h[1],b=Object(n.useState)(-1),y=Object(E.a)(b,2),j=y[0],S=y[1],k=f.a.User.current();return r.a.createElement("div",{className:"page home"},r.a.createElement(R,{list:a}),r.a.createElement("div",{className:"btn-wrap"},r.a.createElement(O.a,{type:"primary",onClick:function(){l(!0)}},"\u660e\u7ec6"),k?r.a.createElement(O.a,{type:"primary",onClick:function(){d(!1),p(!0)}},"\u589e\u52a0\u8bb0\u5f55"):null),r.a.createElement(L,{visible:o,onOk:function(){l(!1),t()},onCancel:function(){l(!1)},isModify:m,roundIndex:j}),r.a.createElement(Y,{visible:g,onOk:function(){p(!1)},onCancel:function(){p(!1)},onModify:function(e){S(e),d(!0),p(!1),l(!0)}}))}var B=a(603),F=a(279);a(584);function W(){var e=Object(n.useState)([]),t=Object(E.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),o=Object(E.a)(c,2),l=o[0],i=o[1];Object(n.useEffect)((function(){m()}),[]);var u=f.a.User.current();function m(){var e=new f.a.Query("GamePic");e.limit(5),e.skip(a.length),i(!0),e.find().then((function(e){s(a.concat(e)),i(!1)}))}return r.a.createElement("div",{className:"page photo"},u?r.a.createElement("div",{className:"upload-wrap"},r.a.createElement(B.a,{beforeUpload:function(e,t){return t.forEach((function(e){var t=new f.a.File(e.name,e);t.metaData("type",0);var a=new(f.a.Object.extend("GamePic"));a.set("file",t),a.set("uploader",f.a.User.current()),a.save({keepFileName:!0}).then((function(){b.a.success("\u4e0a\u4f20\u6210\u529f"),m()}))})),!1},showUploadList:!1,multiple:!0},r.a.createElement(O.a,null,"\u4e0a\u4f20\u56fe\u7247"))):null,r.a.createElement("div",{className:"pics"},a.map((function(e){return r.a.createElement("img",{key:e.get("objectId"),src:e.get("file").get("url"),alt:""})}))),r.a.createElement("div",{className:"spin-wrap"},l?r.a.createElement(F.a,null):r.a.createElement("span",{className:"link-style",onClick:m},"\u52a0\u8f7d\u66f4\u591a")))}var Q=a(116),J=(a(595),function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={text:"",messageList:[],isJoining:!1},e.client=null,e.room=null,e.scrollRef=Object(n.createRef)(),e.user=f.a.User.current(),e.handleTextMessageChange=function(t){e.setState({text:t.target.value})},e.handleTextMessageEnterChange=function(t){e.setState({text:t.currentTarget.value}),e.handleSend()},e.handleSend=function(){if(e.state.text){var t=new Q.TextMessage(e.state.text);t.setAttributes({senderName:e.user.getUsername()}),e.room&&(e.room.send(t),e.updateMessageList(t),e.setState({text:""}))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.user&&new Q.Realtime({appId:"xfKlG0D6VO6MgwOUTzQ31f7W-gzGzoHsz",appKey:"k9TuwPqFQmsMqj3HYa83WCFs",server:"https://xfklg0d6.lc-cn-n1-shared.com"}).createIMClient(this.user).then((function(t){e.client=t,t.getQuery().equalTo("tr",!0).find().then((function(t){t.length<1?e.createRoom():e.joinRoom(t[0])})).then((function(){e.listenMessage()})).catch(console.error)}))}},{key:"createRoom",value:function(){var e=this;this.client&&this.client.createChatRoom({name:"\u6df1\u6316\u6d1e\uff0c\u5e7f\u79ef\u7cae\uff0c\u4e0d\u79f0\u738b"}).then((function(t){e.room=t,e.setState({isJoining:!1}),e.loadLocalMessages()}))}},{key:"loadLocalMessages",value:function(){var e=localStorage.getItem("texasMessages");e&&(e=JSON.parse(e),this.setState({messageList:e}))}},{key:"joinRoom",value:function(e){var t=this;e.join().then((function(){t.room=e,t.setState({isJoining:!1}),t.loadLocalMessages()}))}},{key:"listenMessage",value:function(){var e=this;this.client&&(this.client.on(Q.Event.INVITED,(function(e,t){})),this.client.on(Q.Event.MESSAGE,(function(t,a){e.updateMessageList(t)})))}},{key:"updateMessageList",value:function(e){var t=this;this.setState({messageList:this.state.messageList.concat(e)},(function(){localStorage.setItem("texasMessages",JSON.stringify(t.state.messageList.slice(0,100)))})),setTimeout((function(){var e=t.scrollRef.current;e&&e.scrollTo(0,e.scrollHeight)}),100)}},{key:"getSenderName",value:function(e){return e.attributes.senderName}},{key:"render",value:function(){var e=this;return this.user?this.state.isJoining?r.a.createElement("div",{className:"message-wrap"},r.a.createElement(F.a,{tip:"\u6b63\u5728\u52a0\u5165\u804a\u5929\u5ba4..."})):r.a.createElement("div",{className:"message-wrap"},r.a.createElement("div",{className:"messages",ref:this.scrollRef},this.state.messageList.map((function(t){return r.a.createElement("div",{className:"message-item",key:t.id},r.a.createElement("div",null,r.a.createElement("span",{className:"username"},e.getSenderName(t)),r.a.createElement("span",{className:"message-time"},T()(t.timestamp).format("YYYY/MM/DD HH:mm:ss"))),r.a.createElement("div",{className:"message-content"},t.text))}))),r.a.createElement("div",{className:"send-wrap"},r.a.createElement(j.a,{value:this.state.text,onChange:this.handleTextMessageChange,onPressEnter:this.handleTextMessageEnterChange}),r.a.createElement(O.a,{size:"large",onClick:this.handleSend},"\u53d1\u9001"))):r.a.createElement("div",{className:"message-wrap"},r.a.createElement("div",null,"\u8bf7\u5148\u767b\u5f55"))}}]),a}(n.Component)),q=a(115),G=a(609),H=(a(596),function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isEdit:!1,relativePlayer:"",isSaving:!1},e.handleEditClick=function(){e.setState({isEdit:!0})},e.handleRelativePlayer=function(){if(!e.state.isSaving){var t=f.a.Object.createWithoutData("Player",e.state.relativePlayer),a=f.a.User.current();t.set("user",a),a.set("player",t),e.setState({isSaving:!0}),Promise.all([t.save(),a.save()]).then((function(){e.setState({isEdit:!1,isSaving:!1})}),(function(t){b.a.error(t.message),e.setState({isSaving:!1})}))}},e.handlePlayerSelectChange=function(t){e.setState({relativePlayer:t})},e.handleUploadAvatar=function(e){var t=new f.a.File(e.name,e);t.metaData("type",1);var a,n=f.a.User.current();n.set("avatar",t),n.get("player")&&(a=n.get("player").get("objectId"),(a=f.a.Object.createWithoutData("Player",a)).set("avatar",t));var r=[n.save()];return a&&r.push(a.save()),Promise.all(r).then((function(){b.a.success("\u4e0a\u4f20\u6210\u529f")})).catch((function(e){b.a.error(e.message)})),!1},e}return Object(l.a)(a,[{key:"getRelativePlayer",value:function(){var e=f.a.User.current().get("player");if(!e)return"--";var t=this.context.users.find((function(t){return t.get("objectId")===e.get("objectId")}));return t&&t.get("name")||"--"}},{key:"renderPlayer",value:function(){var e=this,t=this.context.users;if(this.state.isEdit){var a=f.a.User.current().get("player");return a=a&&a.get("objectId")||"",r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{style:{width:120},placeholder:"\u8bf7\u9009\u62e9\u9009\u624b",onChange:this.handlePlayerSelectChange,defaultValue:a},t.map((function(e){var t=e.get("objectId");return r.a.createElement(q.a.Option,{value:t,key:t},e.get("name"))}))),r.a.createElement(O.a,{type:"link",onClick:this.handleRelativePlayer},"\u4fdd\u5b58"),r.a.createElement(O.a,{type:"link",onClick:function(){e.setState({isEdit:!1})}},"\u53d6\u6d88"),r.a.createElement("span",null,"\u672a\u627e\u5230\u9009\u624b\uff1f\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6dfb\u52a0"))}return r.a.createElement(r.a.Fragment,null,this.getRelativePlayer(),r.a.createElement("div",{className:"edit-wrap",onClick:this.handleEditClick},r.a.createElement(G.a,null)))}},{key:"renderAvatar",value:function(){var e=f.a.User.current().get("avatar");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"avatar-wrap"},e?r.a.createElement(w.a,{size:64,src:e.get("url")}):r.a.createElement(w.a,{size:64,icon:r.a.createElement(x.a,null)})),r.a.createElement(B.a,{beforeUpload:this.handleUploadAvatar,showUploadList:!1},r.a.createElement(O.a,null,"\u4e0a\u4f20")))}},{key:"render",value:function(){return r.a.createElement("div",{className:"page profile"},r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"label"},"\u5173\u8054\u9009\u624b"),r.a.createElement("div",{className:"content"},this.renderPlayer())),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"label"},"\u5934\u50cf"),r.a.createElement("div",{className:"content"},this.renderAvatar())))}}]),a}(r.a.Component));H.contextType=m;var K=a(70);function V(e){var t=e.children,a=Object(K.a)(e,["children"]),s=Object(n.useContext)(m);return r.a.createElement(C.b,Object.assign({},a,{render:function(e){var a=e.location;return s.isAuthenticated?t:r.a.createElement(C.a,{to:{pathname:"/auth",state:{from:a}}})}}))}a(597);function $(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],s=t[1],c=Object(n.useContext)(m).setIsAuthenticated,o=Object(C.g)(),l={pathname:"/"};return r.a.createElement("div",{className:"auth-wrap"},r.a.createElement(j.a,{onChange:function(e){return s(e.target.value)},placeholder:"\u6697\u53f7"}),r.a.createElement(O.a,{onClick:function(){"41b9df4a217bb3c10b1c339358111b0d"===Object(S.MD5)(a).toString()?(c(!0),o.replace(l)):b.a.error("\u8bf7\u91cd\u8bd5")}},"Auth"))}var X=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).setUsers=function(t){e.setState({users:t})},e.setRounds=function(t){e.setState({rounds:t})},e.setRoundUserInfo=function(t){e.setState({roundUserInfo:t},e.calcList)},e.setShowSession=function(t){e.setState({showSession:!!t})},e.setIsAuthenticated=function(t){e.setState({isAuthenticated:t})},e.state={users:[],rounds:[],roundUserInfo:[],showSession:!1,isAuthenticated:!1,setUsers:e.setUsers,setRounds:e.setRounds,setRoundUserInfo:e.setRoundUserInfo,setShowSession:e.setShowSession,setIsAuthenticated:e.setIsAuthenticated,list:[]},e.getUsers=function(){new f.a.Query("Player").find().then((function(t){e.setUsers(t)}))},e.getAllRounds=function(){new f.a.Query("Round").find().then((function(t){Promise.all(t.map((function(t){return e.getRoundInfo(t)}))).then((function(a){e.setRounds(t),e.setRoundUserInfo(a)}))}))},e.getRoundInfo=function(e){var t=new f.a.Query("RoundUserInfo");return t.equalTo("round",e),t.find()},e.handleAddDone=function(){e.getAllRounds()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUsers(),this.getAllRounds()}},{key:"calcList",value:function(){var e=this.state,t=e.roundUserInfo,a=e.rounds,n={};t.forEach((function(e,t){var r=a[t].get("leverage");e.forEach((function(e){var t=e.get("player"),a=e.get("amount");a=+a;var s=t.get("objectId"),c=n[s];c||(c={max:0,min:0,total:0,totalBalance:0,count:0,player:t,currentLeverage:0}),a>c.max&&(c.max=a),a<c.min&&(c.min=a),c.total=+new p.a(c.total).plus(a).valueOf(),c.totalBalance=+new p.a(c.totalBalance).plus(new p.a(a).times(r)).valueOf(),0!==a&&c.count++,n[s]=c}))}));var r=h.a.values(n);r.sort((function(e,t){return t.totalBalance-e.totalBalance})),this.setState({list:r})}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.rounds,n=e.roundUserInfo,s=e.showSession,c=e.setUsers,o=e.setRounds,l=e.setRoundUserInfo,i=e.setShowSession,u=e.list,d=e.isAuthenticated,f=e.setIsAuthenticated;return r.a.createElement("div",{className:"app"},r.a.createElement(m.Provider,{value:{users:t,rounds:a,roundUserInfo:n,showSession:s,setUsers:c,setRounds:o,setRoundUserInfo:l,setShowSession:i,isAuthenticated:d,setIsAuthenticated:f}},r.a.createElement(I.a,null,d?r.a.createElement(N,null):null,r.a.createElement(C.d,null,r.a.createElement(V,{path:"/photo"},r.a.createElement(W,null)),r.a.createElement(V,{path:"/message"},r.a.createElement(J,null)),r.a.createElement(V,{path:"/profile"},r.a.createElement(H,null)),r.a.createElement(C.b,{path:"/auth"},r.a.createElement($,null)),r.a.createElement(V,{path:"/"},r.a.createElement(z,{list:u,onAddDone:this.handleAddDone}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(291),_=a(9);f.a.init({appId:"xfKlG0D6VO6MgwOUTzQ31f7W-gzGzoHsz",appKey:"k9TuwPqFQmsMqj3HYa83WCFs",serverURL:"https://xfklg0d6.lc-cn-n1-shared.com"}),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_.a,{locale:Z.a},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[294,1,2]]]);
//# sourceMappingURL=main.7e607abc.chunk.js.map