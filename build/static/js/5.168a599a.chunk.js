(this.webpackJsonptexas=this.webpackJsonptexas||[]).push([[5],{499:function(e,t,n){},614:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var a=n(36),r=n(0),c=n.n(r),i=n(43),o=n(464),l=n(612),u=n(57),s=n(467);n(499);function d(e){var t=e.list,n=(Object(r.useContext)(u.a),[{title:"\u6392\u540d",key:"rank",render:function(e,t,n){return n+1}},{title:"\u9009\u624b",key:"username",render:function(e,t){var n=t.player,a=n.avatar,r=n.name;return c.a.createElement("div",{className:"player-wrap"},c.a.createElement("div",{className:"avatar-wrap"},a?c.a.createElement(o.a,{size:24,src:a}):c.a.createElement(o.a,{size:24,icon:c.a.createElement(s.a,null)})),r)}},{title:"\u53c2\u8d5b\u6b21\u6570",key:"playNum",dataIndex:"playNum"},{title:"\u5355\u6b21\u6700\u5927\u76c8\u5229",key:"max",dataIndex:"max",sorter:function(e,t){return e.max-t.max}},{title:"\u5355\u6b21\u6700\u5927\u4e8f\u635f",key:"min",dataIndex:"min",sorter:function(e,t){return e.min-t.min}},{title:"\u7d2f\u8ba1\u7b79\u7801\u76c8\u4e8f",key:"total",dataIndex:"total",sorter:function(e,t){return e.total-t.total}},{title:"\u7d2f\u8ba1\u76c8\u4e8f\u91d1\u989d",key:"totalBalance",dataIndex:"totalBalance",sorter:function(e,t){return e.totalBalance-t.totalBalance}},{title:"\u5f53\u524d\u8d54\u7387",key:"currentLeverage",dataIndex:"currentLeverage"},{title:"\u64cd\u4f5c",key:"opt",dataIndex:"opt"}]);return c.a.createElement("div",{className:"rank-wrap"},c.a.createElement(l.a,{dataSource:t,columns:n,pagination:!1}))}var m=n(19),f=n(468),p=n(613),v=n(615),O=n(465),b=n(496),y=n.n(b),k=n(100);function j(e){var t=e.isModify,n=void 0!==t&&t,i=e.roundIndex,o=void 0===i?0:i,s=e.visible,d=e.onOk,b=e.onCancel,j=Object(r.useContext)(u.a),E=j.rounds,g=Object(r.useState)([{roundNO:E.length+1}]),x=Object(a.a)(g,2),h=x[0],C=x[1],N=Object(r.useState)(""),I=Object(a.a)(N,2),S=I[0],w=I[1],D=Object(r.useState)(.1),Y=Object(a.a)(D,2),M=Y[0],B=Y[1],L=Object(r.useState)({}),z=Object(a.a)(L,2),J=z[0],T=z[1];function A(e){w(e?e.format("YYYY/MM/DD"):"")}function P(e){B(e||.1)}return Object(r.useEffect)((function(){if(n){var e=j.roundDetails[o],t={};e.players&&e.players.forEach((function(e){t[e.playerId]=e.amount})),C([{roundNO:o+1}]),B(e.leverage),w(e.date),T(t)}}),[n,o,E]),c.a.createElement(O.a,{visible:s,onCancel:function(){b()},onOk:function(){if(n){var e={id:j.roundDetails[o].id,date:S,leverage:M,players:Object.keys(J).map((function(e){return{amount:J[e],playerId:e}}))};Object(k.e)(e).then((function(){d&&d()})).catch((function(e){f.a.error(e.message)}))}else{var t=Object.keys(J).map((function(e){return{id:e,amount:J[e]}})),a={date:S,leverage:M,playerInfo:t};Object(k.a)(a).then((function(){d&&d()})).catch((function(e){f.a.error(e.message)}))}},width:1200},c.a.createElement("div",{className:"add-round-wrap"},c.a.createElement(l.a,{dataSource:h,columns:[{title:"\u573a\u6b21",key:"roundNO",dataIndex:"roundNO",ellipsis:!0},{title:"\u65e5\u671f",key:"dateTime",ellipsis:!0,render:function(){return c.a.createElement("div",{style:{width:"150px"}},c.a.createElement(p.a,{onChange:A,format:"YYYY/MM/DD",value:S&&y()(S,"YYYY/MM/DD")||void 0}))}},{title:"\u6760\u6746\u6bd4\u4f8b",key:"leverage",ellipsis:!0,render:function(){return c.a.createElement(v.a,{onChange:P,value:M})}}].concat(j.players.map((function(e){return{title:e.name,key:"".concat(e.id),ellipsis:!0,render:function(){return c.a.createElement(v.a,{onChange:function(t){return function(e,t){e=e?+e:0;var n=Object(m.a)({},J);n[t.id]=e,T(n)}(t,e)},value:J[e.id]})}}}))),pagination:!1,scroll:{x:!0}})))}function E(e){var t=e.visible,n=e.onModify,a=e.onOk,i=e.onCancel,o=Object(r.useContext)(u.a);return Object(r.useEffect)((function(){Object(k.c)().then((function(e){o.setRoundDetails(e)}))}),[]),c.a.createElement(O.a,{visible:t,onCancel:i,onOk:a,width:1200},c.a.createElement("div",{className:"details-round-wrap"},c.a.createElement(l.a,{dataSource:o.roundDetails,columns:function(){var e=[{title:"\u573a\u6b21",key:"roundNO",ellipsis:!0,render:function(e,t,n){return n+1}},{title:"\u65e5\u671f",key:"dateTime",ellipsis:!0,render:function(e,t){return t.date}},{title:"\u6760\u6746\u6bd4\u4f8b",key:"leverage",ellipsis:!0,render:function(e,t){return t.leverage}}],t=o.players;return e=(e=e.concat(t.map((function(e){return{title:e.name,key:e.id,ellipsis:!0,render:function(t,n,a){return function(e,t){var n=o.roundDetails[t].players.find((function(t){return t.playerId===e}));return n&&n.amount||""}(e.id,a)}}})))).concat({title:"\u64cd\u4f5c",key:"opt",render:function(e,t,a){return c.a.createElement("div",{className:"details-opt"},c.a.createElement("span",{onClick:function(){return function(e){n(e)}(a)}},"\u4fee\u6539"))}})}(),pagination:!1,scroll:{x:!0}})))}var g=n(466),x=n(227);function h(e){var t=e.visible,n=e.onOk,i=e.onCancel,o=Object(r.useContext)(u.a),l=Object(r.useState)(!1),s=Object(a.a)(l,2),d=s[0],m=s[1],p=Object(r.useState)(""),v=Object(a.a)(p,2),b=v[0],y=v[1];return c.a.createElement(O.a,{title:"\u6dfb\u52a0\u9009\u624b",visible:t,onOk:function(){if(!b)return f.a.error("\u8bf7\u8f93\u5165\u59d3\u540d");m(!0),Object(x.a)({name:b}).then((function(){m(!1),o.getPlayers(),n&&n()})).catch((function(e){m(!1),e&&f.a.error(e.message)}))},onCancel:function(){i&&i()},confirmLoading:d},c.a.createElement("div",{className:"session"},c.a.createElement("div",{className:"form-row"},c.a.createElement(g.a,{placeholder:"\u59d3\u540d",value:b,onChange:function(e){y(e.target.value)}}))))}function C(e){var t=e.onAddDone,n=e.list,o=Object(r.useState)(!1),l=Object(a.a)(o,2),u=l[0],s=l[1],m=Object(r.useState)(!1),f=Object(a.a)(m,2),p=f[0],v=f[1],O=Object(r.useState)(!1),b=Object(a.a)(O,2),y=b[0],k=b[1],g=Object(r.useState)(!1),x=Object(a.a)(g,2),C=x[0],N=x[1],I=Object(r.useState)(-1),S=Object(a.a)(I,2),w=S[0],D=S[1];return c.a.createElement("div",{className:"page home"},c.a.createElement(d,{list:n}),c.a.createElement("div",{className:"btn-wrap"},c.a.createElement(i.a,{type:"primary",onClick:function(){N(!0)}},"\u6dfb\u52a0\u9009\u624b"),c.a.createElement(i.a,{type:"primary",onClick:function(){v(!1),k(!0)}},"\u660e\u7ec6"),c.a.createElement(i.a,{type:"primary",onClick:function(){s(!0)}},"\u589e\u52a0\u8bb0\u5f55")),c.a.createElement(j,{visible:u,onOk:function(){s(!1),t()},onCancel:function(){s(!1)},isModify:p,roundIndex:w}),c.a.createElement(E,{visible:y,onOk:function(){k(!1)},onCancel:function(){k(!1)},onModify:function(e){D(e),v(!0),k(!1),s(!0)}}),c.a.createElement(h,{visible:C,onOk:function(){N(!1)},onCancel:function(){N(!1)}}))}}}]);
//# sourceMappingURL=5.168a599a.chunk.js.map